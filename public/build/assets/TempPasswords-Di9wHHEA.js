import{_ as $,a as j}from"./index-DiYL93hV.js";import{_ as w}from"./index-Dr7hifzf.js";import{_ as b}from"./index-ByX7PKqW.js";import{c as y,_ as C,a as T,b as U}from"./CardTitle.vue_vue_type_script_setup_true_lang-RZ9trK3M.js";import{_ as H}from"./CardDescription.vue_vue_type_script_setup_true_lang-CV9uiqH5.js";import{_ as J}from"./CardFooter.vue_vue_type_script_setup_true_lang-hmzI4VcP.js";import{_ as Q}from"./Label.vue_vue_type_script_setup_true_lang-CqE0TfK9.js";import{_ as W}from"./AppLayout.vue_vue_type_script_setup_true_lang-D0s4Pvhb.js";import{d as X,a as Y,r as E,b as v,e as Z,f as m,w as a,g as e,h as p,i as r,c as f,u as s,o as l,t as d,j as i,l as ee,F as se,q as te,s as A}from"./app-2QXCfeMG.js";import{K as L}from"./key-CZ-KDmex.js";import{C as N}from"./clock-7_ft3SL5.js";import{A as re}from"./arrow-left-CWKWrJMG.js";import{U as g}from"./user-check-CMP4i0Y4.js";import{T as S}from"./triangle-alert-BDyMRAj1.js";import{F as B}from"./file-text-DUxpBa_C.js";import{U as ae}from"./user-plus-C1G_NWdg.js";import{R as oe}from"./refresh-cw-7T5blb2a.js";import{S as le}from"./shield-sNOBoAws.js";import{U as q}from"./users-BtwuLIeb.js";import{E as de}from"./eye-off-DdBw1_bM.js";import{E as ie}from"./eye-tKbU2OYl.js";import{C as ne}from"./check-CULVh7_j.js";import{C as ue}from"./copy-oSoeo_-c.js";import{D as me}from"./download-B-fWZjdw.js";import"./utils-BtbbqlUx.js";import"./useForwardExpose-WdC8WNUR.js";import"./VisuallyHidden-BVvg5NBU.js";import"./house-Jt9P1-Sj.js";import"./createLucideIcon-CganvotL.js";import"./Collection-p-5Ft2RQ.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./RovingFocusGroup-Bsye0hv5.js";import"./index-Cs2OOWYa.js";import"./log-out-BvlH2FDg.js";import"./AppLogoPng.vue_vue_type_script_setup_true_lang-DV5UP9ty.js";import"./_plugin-vue_export-helper-D6Za-jf_.js";import"./Breadcrumbs.vue_vue_type_script_setup_true_lang-DAJcy_Cp.js";import"./chevron-right-CD5--JLw.js";const ce={class:"space-y-6 p-6"},pe={class:"flex items-center justify-between"},fe={class:"mt-2 flex items-center gap-2 text-muted-foreground"},be={key:0},ge={key:1},xe={class:"flex items-center gap-3"},_e={class:"mt-1 space-y-1 text-sm"},ve={key:2,class:"space-y-4"},he={class:"grid grid-cols-2 gap-4 text-sm md:grid-cols-4"},ke={class:"rounded-lg border border-blue-100 bg-white p-3 text-center dark:border-blue-800 dark:bg-card"},we={class:"font-semibold text-blue-900 dark:text-blue-300"},ye={class:"rounded-lg border border-green-100 bg-white p-3 text-center dark:border-green-800 dark:bg-card"},Ce={class:"font-semibold text-green-900 dark:text-green-300"},Te={class:"rounded-lg border border-amber-100 bg-white p-3 text-center dark:border-amber-800 dark:bg-card"},Ue={class:"font-semibold text-amber-900 dark:text-amber-300"},De={class:"rounded-lg border border-blue-100 bg-white p-3 text-center dark:border-blue-800 dark:bg-card"},Ie={class:"font-semibold text-blue-900 dark:text-blue-300"},$e={key:3,class:"space-y-4"},je={class:"flex items-center gap-4 rounded-lg border border-green-100 bg-white p-4 dark:border-green-800 dark:bg-card"},Ee={class:"flex h-12 w-12 items-center justify-center rounded-full bg-green-100 dark:bg-green-900/30"},Pe={class:"flex-1"},Re={class:"font-semibold text-green-900 dark:text-green-300"},Ve={class:"mt-1 text-sm text-green-700 dark:text-green-400"},Fe={class:"mt-1 text-xs text-green-600 dark:text-green-500"},Ae={key:0,class:"py-12 text-center"},Le={class:"mx-auto max-w-md"},Ne={class:"mx-auto mb-6 flex h-20 w-20 items-center justify-center rounded-full bg-muted p-4"},Se={class:"flex justify-center gap-3"},Be={key:1,class:"divide-y divide-border"},qe={class:"flex items-start justify-between"},ze={class:"min-w-0 flex-1"},Ge={class:"mb-3 flex items-center gap-3"},Ke={class:"flex h-10 w-10 items-center justify-center rounded-full bg-primary/10"},Me={class:"min-w-0 flex-1"},Oe={class:"truncate font-semibold text-foreground"},He={class:"mt-1 flex items-center gap-4 text-sm text-muted-foreground"},Je={class:"truncate"},Qe={class:"rounded bg-muted px-2 py-1 font-mono text-xs"},We={class:"rounded-lg border border-border bg-muted/50 p-4"},Xe={class:"mb-2 flex items-center justify-between"},Ye={class:"flex items-center gap-2"},Ze={class:"flex items-center justify-between rounded border border-border bg-background px-3 py-2 font-mono text-lg"},es={class:"text-sm text-muted-foreground"},ss={class:"flex items-center gap-2"},ts={class:"flex items-center gap-3"},rs={class:"grid grid-cols-1 gap-6 text-sm md:grid-cols-2"},as={class:"space-y-3"},os={class:"flex items-center gap-2 font-semibold text-blue-900 dark:text-blue-300"},ls={class:"space-y-3"},ds={class:"flex items-center gap-2 font-semibold text-blue-900 dark:text-blue-300"},Hs=X({__name:"TempPasswords",setup(is){const o=Y(),h=E(null),x=E([]);E(!1);const _=v(()=>{const n=o.props.flash?.temp_passwords||[],t=o.props.flash?.temp_password,c=[...n];if(t){const u=o.props.flash?.user_created||o.props.flash?.user_reset,I=o.props.flash?.user_created?"creado":"reseteado";c.push({email:u?.email||"Usuario individual",name:u?.name||`Usuario ${I}`,temp_password:t,institutional_id:u?.institutional_id||"Asignado al usuario"})}return c}),k=v(()=>o.props.flash?.import_results),P=v(()=>_.value.length>0),R=v(()=>!!o.props.flash?.temp_password&&!o.props.flash?.temp_passwords),D=v(()=>o.props.flash?.user_created?"creado":"reseteado");Z(()=>{x.value=new Array(_.value.length).fill(!1)});const z=[{title:"Dashboard",href:"/admin/dashboard"},{title:"Usuarios",href:"/admin/users"},{title:"Contraseñas Temporales",href:"#"}];function G(n,t){navigator.clipboard.writeText(n).then(()=>{h.value=t,setTimeout(()=>{h.value=null},2e3)})}function K(n){x.value[n]=!x.value[n]}function M(){const n=o.props.flash?.temp_passwords?"/admin/users/import/passwords-report":"/admin/users/temp-passwords/report";globalThis.location.href=n}function V(){A.visit("/admin/users")}function O(){A.visit("/admin/users/import")}function F(){const n=new Date;return n.setDate(n.getDate()+7),n.toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"})}return(n,t)=>(l(),m(W,{breadcrumbs:z},{default:a(()=>[e("div",ce,[e("div",pe,[e("div",null,[t[0]||(t[0]=e("h1",{class:"text-3xl font-bold text-foreground"}," Contraseñas Temporales ",-1)),e("p",fe,[r(s(L),{class:"h-4 w-4 text-primary"}),R.value?(l(),f("span",be," Credenciales para usuario "+d(D.value),1)):(l(),f("span",ge," Credenciales de acceso para nuevos usuarios "))])]),e("div",xe,[r(s(w),{variant:"outline",class:"border-amber-200 bg-amber-500/10 text-amber-600 dark:border-amber-800 dark:bg-amber-900/20 dark:text-amber-400"},{default:a(()=>[r(s(N),{class:"mr-1 h-3 w-3"}),t[1]||(t[1]=i(" Expiran en 7 días ",-1))]),_:1}),r(s(b),{variant:"outline","as-child":""},{default:a(()=>[r(s(ee),{href:"/admin/users"},{default:a(()=>[r(s(re),{class:"mr-2 h-4 w-4"}),t[2]||(t[2]=i(" Volver a Usuarios ",-1))]),_:1})]),_:1})])]),s(o).props.flash?.success?(l(),m(s($),{key:0,class:"border-green-200 bg-green-50 dark:border-green-900/50 dark:bg-green-900/20"},{default:a(()=>[r(s(g),{class:"h-4 w-4 text-green-600 dark:text-green-400"}),r(s(j),{class:"text-green-800 dark:text-green-300"},{default:a(()=>[i(d(s(o).props.flash.success),1)]),_:1})]),_:1})):p("",!0),s(o).props.flash?.error?(l(),m(s($),{key:1,class:"border-red-200 bg-red-50 dark:border-red-900/50 dark:bg-red-900/20"},{default:a(()=>[r(s(S),{class:"h-4 w-4 text-red-600 dark:text-red-400"}),r(s(j),{class:"text-red-800 dark:text-red-300"},{default:a(()=>[i(d(s(o).props.flash.error),1)]),_:1})]),_:1})):p("",!0),r(s($),{class:"border-amber-200 bg-amber-50 dark:border-amber-900/50 dark:bg-amber-900/20"},{default:a(()=>[r(s(S),{class:"h-4 w-4 text-amber-600 dark:text-amber-400"}),r(s(j),{class:"text-amber-800 dark:text-amber-300"},{default:a(()=>[t[6]||(t[6]=e("div",{class:"font-semibold"},"Información Importante",-1)),e("ul",_e,[e("li",null," • Las contraseñas son temporales y expiran el "+d(F()),1),t[3]||(t[3]=e("li",null," • Los usuarios deben cambiar su contraseña en el primer inicio de sesión ",-1)),t[4]||(t[4]=e("li",null," • Esta información solo está disponible inmediatamente después de la creación/importación ",-1)),t[5]||(t[5]=e("li",null," • Guarda o descarga esta información antes de salir de esta página ",-1))])]),_:1})]),_:1}),k.value?(l(),f("div",ve,[r(s(y),{class:"border-blue-200 bg-blue-50/30 dark:border-blue-900/50 dark:bg-blue-900/10"},{default:a(()=>[r(s(C),{class:"border-b border-blue-200 dark:border-blue-900/50"},{default:a(()=>[r(s(T),{class:"flex items-center gap-2 text-blue-900 dark:text-blue-300"},{default:a(()=>[r(s(B),{class:"h-5 w-5"}),t[7]||(t[7]=i(" Resumen de Importación ",-1))]),_:1})]),_:1}),r(s(U),{class:"pt-6"},{default:a(()=>[e("div",he,[e("div",ke,[e("div",we,d(k.value.total_rows||0),1),t[8]||(t[8]=e("div",{class:"text-xs text-blue-700 dark:text-blue-400"}," Total de Filas ",-1))]),e("div",ye,[e("div",Ce,d(k.value.imported||0),1),t[9]||(t[9]=e("div",{class:"text-xs text-green-700 dark:text-green-400"}," Usuarios Importados ",-1))]),e("div",Te,[e("div",Ue,d(k.value.skipped||0),1),t[10]||(t[10]=e("div",{class:"text-xs text-amber-700 dark:text-amber-400"}," Filas Omitidas ",-1))]),e("div",De,[e("div",Ie,d(_.value.length),1),t[11]||(t[11]=e("div",{class:"text-xs text-blue-700 dark:text-blue-400"}," Contraseñas Generadas ",-1))])])]),_:1})]),_:1})])):p("",!0),R.value?(l(),f("div",$e,[r(s(y),{class:"border-green-200 bg-green-50/30 dark:border-green-900/50 dark:bg-green-900/10"},{default:a(()=>[r(s(C),{class:"border-b border-green-200 dark:border-green-900/50"},{default:a(()=>[r(s(T),{class:"flex items-center gap-2 text-green-900 dark:text-green-300"},{default:a(()=>[s(o).props.flash?.user_created?(l(),m(s(ae),{key:0,class:"h-5 w-5"})):p("",!0),s(o).props.flash?.user_reset?(l(),m(s(oe),{key:1,class:"h-5 w-5"})):p("",!0),i(" Usuario "+d(D.value==="creado"?"Creado":"Reseteado")+" Exitosamente ",1)]),_:1})]),_:1}),r(s(U),{class:"pt-6"},{default:a(()=>[e("div",je,[e("div",Ee,[r(s(g),{class:"h-6 w-6 text-green-600 dark:text-green-400"})]),e("div",Pe,[e("h3",Re,d(s(o).props.flash?.user_created?.name||s(o).props.flash?.user_reset?.name),1),e("div",Ve,d(s(o).props.flash?.user_created?.email||s(o).props.flash?.user_reset?.email),1),e("div",Fe," ID: "+d(s(o).props.flash?.user_created?.institutional_id||s(o).props.flash?.user_reset?.institutional_id),1)]),r(s(w),{variant:"outline",class:"border-green-200 bg-green-500/10 text-green-600 dark:border-green-800 dark:bg-green-900/20 dark:text-green-400"},{default:a(()=>[i(d(D.value==="creado"?"Nuevo Usuario":"Contraseña Reseteada"),1)]),_:1})])]),_:1})]),_:1})])):p("",!0),r(s(y),{class:"border-border shadow-lg"},{default:a(()=>[r(s(C),{class:"border-b border-border bg-muted/50"},{default:a(()=>[r(s(T),{class:"flex items-center gap-2 text-foreground"},{default:a(()=>[r(s(le),{class:"h-5 w-5 text-primary"}),t[12]||(t[12]=i(" Credenciales de Acceso ",-1)),r(s(w),{variant:"secondary",class:"ml-2"},{default:a(()=>[i(d(_.value.length),1)]),_:1})]),_:1}),r(s(H),{class:"text-muted-foreground"},{default:a(()=>[...t[13]||(t[13]=[i(" Contraseñas temporales generadas para los nuevos usuarios ",-1)])]),_:1})]),_:1}),r(s(U),{class:"p-0"},{default:a(()=>[P.value?(l(),f("div",Be,[(l(!0),f(se,null,te(_.value,(c,u)=>(l(),f("div",{key:u,class:"p-6 transition-colors hover:bg-muted/30"},[e("div",qe,[e("div",ze,[e("div",Ge,[e("div",Ke,[r(s(g),{class:"h-5 w-5 text-primary"})]),e("div",Me,[e("h3",Oe,d(c.name),1),e("div",He,[e("span",Je,d(c.email),1),t[18]||(t[18]=e("span",null,"•",-1)),e("span",Qe,d(c.institutional_id),1)])])]),e("div",We,[e("div",Xe,[r(s(Q),{class:"text-sm font-medium text-foreground"},{default:a(()=>[...t[19]||(t[19]=[i("Contraseña Temporal",-1)])]),_:1}),e("div",Ye,[r(s(b),{variant:"ghost",size:"sm",onClick:I=>K(u),class:"h-8 w-8 p-0"},{default:a(()=>[x.value[u]?(l(),m(s(de),{key:0,class:"h-4 w-4"})):(l(),m(s(ie),{key:1,class:"h-4 w-4"}))]),_:2},1032,["onClick"]),r(s(b),{variant:"ghost",size:"sm",onClick:I=>G(c.temp_password,u),class:"h-8 w-8 p-0"},{default:a(()=>[h.value===u?(l(),m(s(ne),{key:0,class:"h-4 w-4 text-green-600"})):(l(),m(s(ue),{key:1,class:"h-4 w-4"}))]),_:2},1032,["onClick"])])]),e("div",Ze,[e("span",null,d(x.value[u]?c.temp_password:"•".repeat(12)),1),h.value===u?(l(),m(s(w),{key:0,variant:"outline",class:"border-green-200 bg-green-500/10 text-xs text-green-600 dark:border-green-800 dark:bg-green-900/20 dark:text-green-400"},{default:a(()=>[...t[20]||(t[20]=[i(" Copiado ",-1)])]),_:1})):p("",!0)])])])])]))),128))])):(l(),f("div",Ae,[e("div",Le,[e("div",Ne,[r(s(L),{class:"h-10 w-10 text-muted-foreground"})]),t[16]||(t[16]=e("h3",{class:"mb-3 text-2xl font-bold text-foreground"}," No hay contraseñas temporales ",-1)),t[17]||(t[17]=e("p",{class:"mb-6 text-lg text-muted-foreground"}," Las contraseñas temporales solo están disponibles inmediatamente después de crear o importar usuarios. ",-1)),e("div",Se,[r(s(b),{variant:"outline",onClick:O},{default:a(()=>[r(s(q),{class:"mr-2 h-4 w-4"}),t[14]||(t[14]=i(" Importar Usuarios ",-1))]),_:1}),r(s(b),{onClick:V,class:"bg-primary text-primary-foreground hover:bg-primary/90"},{default:a(()=>[r(s(g),{class:"mr-2 h-4 w-4"}),t[15]||(t[15]=i(" Ver Todos los Usuarios ",-1))]),_:1})])])]))]),_:1}),P.value?(l(),m(s(J),{key:0,class:"flex justify-between border-t border-border bg-muted/30 p-6"},{default:a(()=>[e("div",es,[e("div",ss,[r(s(N),{class:"h-4 w-4"}),e("span",null,"Estas contraseñas expiran el "+d(F()),1)])]),e("div",ts,[r(s(b),{variant:"outline",onClick:M},{default:a(()=>[r(s(me),{class:"mr-2 h-4 w-4"}),t[21]||(t[21]=i(" Descargar Reporte ",-1))]),_:1}),r(s(b),{onClick:V,class:"bg-primary text-primary-foreground hover:bg-primary/90"},{default:a(()=>[r(s(g),{class:"mr-2 h-4 w-4"}),t[22]||(t[22]=i(" Ver Todos los Usuarios ",-1))]),_:1})])]),_:1})):p("",!0)]),_:1}),r(s(y),{class:"border-blue-200 bg-blue-50/30 dark:border-blue-900/50 dark:bg-blue-900/10"},{default:a(()=>[r(s(C),null,{default:a(()=>[r(s(T),{class:"flex items-center gap-2 text-blue-900 dark:text-blue-300"},{default:a(()=>[r(s(q),{class:"h-5 w-5"}),t[23]||(t[23]=i(" Instrucciones para Distribuir Credenciales ",-1))]),_:1})]),_:1}),r(s(U),null,{default:a(()=>[e("div",rs,[e("div",as,[e("h4",os,[r(s(g),{class:"h-4 w-4"}),t[24]||(t[24]=i(" Para Usuarios Individuales ",-1))]),t[25]||(t[25]=e("ul",{class:"space-y-2 text-blue-800 dark:text-blue-200"},[e("li",{class:"flex items-start gap-2"},[e("div",{class:"mt-2 h-1.5 w-1.5 flex-shrink-0 rounded-full bg-blue-500"}),e("span",null,"Comparte la contraseña de forma segura con el usuario")]),e("li",{class:"flex items-start gap-2"},[e("div",{class:"mt-2 h-1.5 w-1.5 flex-shrink-0 rounded-full bg-blue-500"}),e("span",null,"Indica al usuario que debe cambiar la contraseña en el primer inicio de sesión")]),e("li",{class:"flex items-start gap-2"},[e("div",{class:"mt-2 h-1.5 w-1.5 flex-shrink-0 rounded-full bg-blue-500"}),e("span",null,"Recuerda que la contraseña expira en 7 días")])],-1))]),e("div",ls,[e("h4",ds,[r(s(B),{class:"h-4 w-4"}),t[26]||(t[26]=i(" Para Importaciones Masivas ",-1))]),t[27]||(t[27]=e("ul",{class:"space-y-2 text-blue-800 dark:text-blue-200"},[e("li",{class:"flex items-start gap-2"},[e("div",{class:"mt-2 h-1.5 w-1.5 flex-shrink-0 rounded-full bg-blue-500"}),e("span",null,"Descarga el reporte completo en formato CSV")]),e("li",{class:"flex items-start gap-2"},[e("div",{class:"mt-2 h-1.5 w-1.5 flex-shrink-0 rounded-full bg-blue-500"}),e("span",null,"Distribuye las credenciales de forma segura a cada usuario")]),e("li",{class:"flex items-start gap-2"},[e("div",{class:"mt-2 h-1.5 w-1.5 flex-shrink-0 rounded-full bg-blue-500"}),e("span",null,"Considera usar un sistema de mensajería seguro o entrega en persona")])],-1))])])]),_:1})]),_:1})])]),_:1}))}});export{Hs as default};
