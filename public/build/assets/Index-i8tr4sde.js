import{_ as Q}from"./FilterBar.vue_vue_type_script_setup_true_lang-CmVvVs49.js";import{_ as b}from"./index-DdRYoR76.js";import{_ as h}from"./index-BP8NaMnx.js";import{c as W,_ as Y,a as tt,b as et}from"./CardTitle.vue_vue_type_script_setup_true_lang-G1xx1pv-.js";import{_ as st}from"./CardDescription.vue_vue_type_script_setup_true_lang-C7_bnbMg.js";import{C as rt,d as ot,e as at,f as it,g as p,h as D,X as lt,_ as dt}from"./AppLayout.vue_vue_type_script_setup_true_lang-Dg9vcmqC.js";import{d as nt,r as ut,b as mt,m as ct,s as _,K as ft,c as x,i as r,w as a,g as t,u as s,v as pt,h as g,j as l,l as f,t as d,o as n,F as C,q as E,n as j,f as m,k as T}from"./app-LMLfy6T_.js";import{U as v}from"./users-DURgrSZU.js";import{U as S}from"./user-plus-CWi1BIwe.js";import{Z as xt}from"./zap-BNiA7W6K.js";import{T as L}from"./trending-up-gtAke1Q_.js";import{U as $}from"./user-check-b-rzh0b6.js";import{L as gt,B as P}from"./_plugin-vue_export-helper-Cs5A_DpR.js";import{S as k}from"./shield-BepMESMM.js";import{U as V}from"./user-ZOL3awYl.js";import{I,U as A}from"./user-x-hj2Z0ddD.js";import{H as bt}from"./hash-B42vCzQp.js";import{M as ht}from"./mail-utwuISgn.js";import{C as B}from"./clock-DEh5UtGW.js";import{D as N}from"./download-CbaCTKRJ.js";import{E as _t}from"./ellipsis-CX87Jk9c.js";import{E as vt}from"./eye-DS3jVQrj.js";import{S as yt}from"./square-pen-DUAIRiyq.js";import{R as wt}from"./refresh-cw-CO6h026N.js";import{F as kt}from"./file-down-QKAt_qV4.js";import"./Input.vue_vue_type_script_setup_true_lang-b_XRYuCz.js";import"./utils-DXrZ82kT.js";import"./useForwardExpose-BGfwThGJ.js";import"./SelectValue.vue_vue_type_script_setup_true_lang-D2fS4MRm.js";import"./VisuallyHidden-B-IbK-2_.js";import"./Collection-CHrqpE2f.js";import"./house-JRBk0Cia.js";import"./createLucideIcon-DAteRrvL.js";import"./chevron-up-BIDXjghQ.js";import"./check-B7CcDjx-.js";import"./useFormControl-D4Xw429v.js";import"./file-text-BPA7HujH.js";import"./book-copy-C6aBo-KE.js";import"./globe-DDpCIurT.js";import"./sparkles-D61fJ1PI.js";import"./filter-CeXdJk36.js";import"./search-SWqZtPYi.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./RovingFocusGroup-BtwHaQnx.js";import"./index-Cs2OOWYa.js";import"./log-out-B30-6VwK.js";import"./Breadcrumbs.vue_vue_type_script_setup_true_lang-bAsAvttd.js";import"./chevron-right-ti3lw4Bb.js";const Ct={class:"space-y-8 p-6"},$t={class:"mb-8"},Ut={class:"flex items-center justify-between"},Dt={class:"mt-2 flex items-center gap-2 text-muted-foreground"},Et={class:"flex items-center gap-4"},jt={class:"flex items-center gap-2 rounded-lg border border-primary/20 bg-primary/10 px-4 py-2 text-primary"},Tt={class:"text-sm font-medium"},St={class:"mb-8 grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-4"},Lt={class:"group overflow-hidden rounded-xl border border-border bg-card shadow-lg transition-all duration-500 hover:-translate-y-1 hover:border-primary/30 hover:shadow-xl"},Pt={class:"p-6"},Vt={class:"flex items-center justify-between"},It={class:"text-3xl font-bold text-foreground"},At={class:"text-success mt-2 flex items-center gap-1 text-xs"},Bt={class:"flex h-12 w-12 items-center justify-center rounded-xl bg-primary/10 transition-transform duration-300 group-hover:scale-110"},Nt={class:"group overflow-hidden rounded-xl border border-border bg-card shadow-lg transition-all duration-500 hover:-translate-y-1 hover:border-secondary/30 hover:shadow-xl"},Ht={class:"p-6"},Mt={class:"flex items-center justify-between"},qt={class:"text-3xl font-bold text-foreground"},Rt={class:"text-success mt-2 flex items-center gap-1 text-xs"},Ft={class:"flex h-12 w-12 items-center justify-center rounded-xl bg-secondary/10 transition-transform duration-300 group-hover:scale-110"},zt={class:"group overflow-hidden rounded-xl border border-border bg-card shadow-lg transition-all duration-500 hover:-translate-y-1 hover:border-primary/30 hover:shadow-xl"},Kt={class:"p-6"},Gt={class:"flex items-center justify-between"},Xt={class:"text-3xl font-bold text-foreground"},Zt={class:"mt-2 flex items-center gap-1 text-xs text-muted-foreground"},Ot={class:"flex h-12 w-12 items-center justify-center rounded-xl bg-primary/10 transition-transform duration-300 group-hover:scale-110"},Jt={class:"group overflow-hidden rounded-xl border border-border bg-card shadow-lg transition-all duration-500 hover:-translate-y-1 hover:border-secondary/30 hover:shadow-xl"},Qt={class:"p-6"},Wt={class:"flex items-center justify-between"},Yt={class:"text-3xl font-bold text-foreground"},te={class:"mt-2 flex items-center gap-1 text-xs text-muted-foreground"},ee={class:"flex h-12 w-12 items-center justify-center rounded-xl bg-secondary/10 transition-transform duration-300 group-hover:scale-110"},se={class:"text-sm text-muted-foreground"},re={class:"overflow-x-auto"},oe={class:"w-full"},ae={class:"px-6 py-4"},ie={class:"flex items-center gap-3"},le={class:"flex h-10 w-10 items-center justify-center rounded-full bg-primary/10"},de={class:"font-semibold text-foreground transition-colors group-hover:text-primary"},ne={class:"mt-1 flex items-center gap-2 text-xs text-muted-foreground"},ue={key:0,class:"flex items-center gap-1"},me={class:"px-6 py-4"},ce={class:"px-6 py-4"},fe={class:"space-y-1"},pe={class:"flex items-center gap-2 text-sm text-muted-foreground"},xe={class:"max-w-[200px] truncate"},ge={class:"text-xs text-muted-foreground"},be={class:"px-6 py-4"},he={class:"flex flex-wrap gap-1"},_e={class:"px-6 py-4"},ve={class:"flex items-center gap-4 text-sm text-muted-foreground"},ye={class:"text-center"},we={class:"font-semibold text-foreground"},ke={class:"text-center"},Ce={class:"font-semibold text-foreground"},$e={class:"text-center"},Ue={class:"font-semibold text-foreground"},De={class:"px-6 py-4"},Ee={key:0,class:"m-6 rounded-xl border-2 border-dashed border-border py-16 text-center"},je={class:"mx-auto max-w-md"},Te={class:"mx-auto mb-6 flex h-20 w-20 items-center justify-center rounded-full bg-primary/10 p-4"},Se={class:"mb-6 text-lg text-muted-foreground"},Le={class:"flex justify-center gap-3"},Pe={key:0,class:"flex justify-center"},Ve={class:"flex gap-2"},js=nt({__name:"Index",props:{users:{default:()=>({data:[],total:0,links:[]})},filters:{default:()=>({})},stats:{default:()=>({total_users:0,active_users:0,students:0,teachers:0})}},setup(u){const y=u,H=[{title:"Dashboard",href:"/admin/dashboard"},{title:"Usuarios",href:"/admin/users"}],c=ut({search:y.filters.search||"",user_type:y.filters.user_type||"",status:y.filters.status||"",membership_status:y.filters.membership_status||""}),M={module:"users"},U=mt(()=>{let i=0;return c.value.search&&i++,c.value.user_type&&i++,c.value.status&&i++,c.value.membership_status&&i++,i});ct(c,i=>{_&&_.get("/admin/users",{search:i.search,user_type:i.user_type,status:i.status,membership_status:i.membership_status},{preserveState:!0,replace:!0,preserveScroll:!0,onError:()=>{}})},{deep:!0});function q(){c.value={search:"",user_type:"",status:"",membership_status:""}}function R(i){_.patch(`/admin/users/${i.id}/toggle-active`)}function F(i){confirm(`¿Estás seguro de que quieres resetear la contraseña de ${i.name}?`)&&_.patch(`/admin/users/${i.id}/reset-password`,{},{onSuccess:()=>{}})}function z(i){confirm(`Para ver la contraseña temporal de ${i.name}, es necesario generar una nueva por seguridad.

¿Deseas generar una nueva contraseña temporal y verla?`)&&_.patch(`/admin/users/${i.id}/reset-password`,{},{onSuccess:()=>{}})}const K={student:"Estudiante",teacher:"Docente",external:"Externo",librarian:"Bibliotecario",admin:"Administrador"},G={student:"bg-blue-500/10 text-blue-600 border-blue-200 dark:bg-blue-500/20 dark:text-blue-400 dark:border-blue-800",teacher:"bg-emerald-500/10 text-emerald-600 border-emerald-200 dark:bg-emerald-500/20 dark:text-emerald-400 dark:border-emerald-800",external:"bg-orange-500/10 text-orange-600 border-orange-200 dark:bg-orange-500/20 dark:text-orange-400 dark:border-orange-800",librarian:"bg-purple-500/10 text-purple-600 border-purple-200 dark:bg-purple-500/20 dark:text-purple-400 dark:border-purple-800",admin:"bg-red-500/10 text-red-600 border-red-200 dark:bg-red-500/20 dark:text-red-400 dark:border-red-800"},X={student:v,teacher:k,external:V,librarian:I,admin:k};function Z(i){return new Date(i).toLocaleDateString("es-ES")}function O(i){return i.membership_expires_at?new Date(i.membership_expires_at)<new Date:!1}return(i,e)=>{const J=ft("Key");return n(),x(C,null,[r(s(pt),null,{default:a(()=>[...e[1]||(e[1]=[t("title",null,"Gestión de Usuarios",-1)])]),_:1}),r(dt,{breadcrumbs:H},{default:a(()=>[t("div",Ct,[t("div",$t,[t("div",Ut,[t("div",null,[e[3]||(e[3]=t("h1",{class:"text-3xl font-bold text-foreground"}," Gestión de Usuarios ",-1)),t("p",Dt,[r(s(v),{class:"h-4 w-4 text-primary"}),e[2]||(e[2]=l(" Administra los usuarios del sistema bibliotecario ",-1))])]),t("div",Et,[r(s(h),{"as-child":"",class:"bg-primary text-primary-foreground hover:bg-primary/90"},{default:a(()=>[r(s(f),{href:"/admin/users/create",class:"flex items-center gap-2"},{default:a(()=>[r(s(S),{class:"h-4 w-4"}),e[4]||(e[4]=l(" Nuevo Usuario ",-1))]),_:1})]),_:1}),t("div",jt,[r(s(xt),{class:"h-4 w-4 animate-pulse"}),t("span",Tt,d(u.users.data.length)+" Usuarios",1)])])])]),t("div",St,[t("div",Lt,[t("div",Pt,[t("div",Vt,[t("div",null,[e[6]||(e[6]=t("p",{class:"mb-2 text-sm font-medium text-muted-foreground"}," Total Usuarios ",-1)),t("p",It,d(u.stats.total_users),1),t("div",At,[r(s(L),{class:"h-3 w-3"}),e[5]||(e[5]=t("span",null,"+8% este mes",-1))])]),t("div",Bt,[r(s(v),{class:"h-6 w-6 text-primary"})])])]),e[7]||(e[7]=t("div",{class:"h-1 w-0 bg-gradient-to-r from-primary to-primary/60 transition-all duration-500 group-hover:w-full"},null,-1))]),t("div",Nt,[t("div",Ht,[t("div",Mt,[t("div",null,[e[9]||(e[9]=t("p",{class:"mb-2 text-sm font-medium text-muted-foreground"}," Usuarios Activos ",-1)),t("p",qt,d(u.stats.active_users),1),t("div",Rt,[r(s(L),{class:"h-3 w-3"}),e[8]||(e[8]=t("span",null,"+5% este mes",-1))])]),t("div",Ft,[r(s($),{class:"h-6 w-6 text-secondary"})])])]),e[10]||(e[10]=t("div",{class:"h-1 w-0 bg-gradient-to-r from-secondary to-secondary/60 transition-all duration-500 group-hover:w-full"},null,-1))]),t("div",zt,[t("div",Kt,[t("div",Gt,[t("div",null,[e[12]||(e[12]=t("p",{class:"mb-2 text-sm font-medium text-muted-foreground"}," Estudiantes ",-1)),t("p",Xt,d(u.stats.students),1),t("div",Zt,[r(s(gt),{class:"h-3 w-3"}),e[11]||(e[11]=t("span",null,"Principal grupo",-1))])]),t("div",Ot,[r(s(v),{class:"h-6 w-6 text-primary"})])])]),e[13]||(e[13]=t("div",{class:"h-1 w-0 bg-gradient-to-r from-primary to-primary/60 transition-all duration-500 group-hover:w-full"},null,-1))]),t("div",Jt,[t("div",Qt,[t("div",Wt,[t("div",null,[e[15]||(e[15]=t("p",{class:"mb-2 text-sm font-medium text-muted-foreground"}," Docentes ",-1)),t("p",Yt,d(u.stats.teachers),1),t("div",te,[r(s(k),{class:"h-3 w-3"}),e[14]||(e[14]=t("span",null,"Personal académico",-1))])]),t("div",ee,[r(s(k),{class:"h-6 w-6 text-secondary"})])])]),e[16]||(e[16]=t("div",{class:"h-1 w-0 bg-gradient-to-r from-secondary to-secondary/60 transition-all duration-500 group-hover:w-full"},null,-1))])]),r(Q,{modelValue:c.value,"onUpdate:modelValue":e[0]||(e[0]=o=>c.value=o),config:M},null,8,["modelValue"]),t("div",se," Mostrando "+d(u.users.data.length)+" de "+d(u.users.total)+" usuarios ",1),r(s(W),{class:"rounded-xl border border-border bg-card shadow-lg"},{default:a(()=>[r(s(Y),null,{default:a(()=>[r(s(tt),{class:"text-foreground"},{default:a(()=>[...e[17]||(e[17]=[l("Lista de Usuarios",-1)])]),_:1}),r(s(st),null,{default:a(()=>[l(d(u.users.total)+" usuarios encontrados ",1)]),_:1})]),_:1}),r(s(et),{class:"p-0"},{default:a(()=>[t("div",re,[t("table",oe,[e[31]||(e[31]=t("thead",null,[t("tr",{class:"border-b border-border bg-muted/50"},[t("th",{class:"px-6 py-4 text-left font-semibold text-foreground"}," Usuario "),t("th",{class:"px-6 py-4 text-left font-semibold text-foreground"}," Tipo "),t("th",{class:"px-6 py-4 text-left font-semibold text-foreground"}," Contacto "),t("th",{class:"px-6 py-4 text-left font-semibold text-foreground"}," Estado "),t("th",{class:"px-6 py-4 text-left font-semibold text-foreground"}," Estadísticas "),t("th",{class:"px-6 py-4 text-left font-semibold text-foreground"}," Acciones ")])],-1)),t("tbody",null,[(n(!0),x(C,null,E(u.users.data,o=>(n(),x("tr",{key:o.id,class:"group border-b border-border transition-colors hover:bg-accent/50"},[t("td",ae,[t("div",ie,[t("div",le,[r(s(V),{class:"h-5 w-5 text-primary"})]),t("div",null,[t("p",de,d(o.name)+" "+d(o.last_name),1),t("div",ne,[r(s(I),{class:"h-3 w-3"}),t("span",null,"DNI: "+d(o.dni),1),o.institutional_id?(n(),x("span",ue,[r(s(bt),{class:"h-3 w-3"}),l(" "+d(o.institutional_id),1)])):g("",!0)])])])]),t("td",me,[r(s(b),{class:j([G[o.user_type],"border font-medium"])},{default:a(()=>[(n(),m(T(X[o.user_type]),{class:"mr-1 h-3 w-3"})),l(" "+d(K[o.user_type]),1)]),_:2},1032,["class"])]),t("td",ce,[t("div",fe,[t("div",pe,[r(s(ht),{class:"h-3 w-3"}),t("span",xe,d(o.email),1)]),t("div",ge," Registro: "+d(Z(o.created_at)),1)])]),t("td",be,[t("div",he,[o.is_active?(n(),m(s(b),{key:1,variant:"outline",class:"border-green-200 bg-green-500/10 text-xs text-green-600"},{default:a(()=>[r(s($),{class:"mr-1 h-3 w-3"}),e[19]||(e[19]=l(" Activo ",-1))]),_:1})):(n(),m(s(b),{key:0,variant:"destructive",class:"text-xs"},{default:a(()=>[r(s(A),{class:"mr-1 h-3 w-3"}),e[18]||(e[18]=l(" Inactivo ",-1))]),_:1})),O(o)?(n(),m(s(b),{key:2,variant:"destructive",class:"text-xs"},{default:a(()=>[r(s(B),{class:"mr-1 h-3 w-3"}),e[20]||(e[20]=l(" Expirado ",-1))]),_:1})):g("",!0),o.is_temp_password?(n(),m(s(b),{key:3,variant:"outline",class:"border-amber-200 bg-amber-500/10 text-xs text-amber-600"},{default:a(()=>[r(s(B),{class:"mr-1 h-3 w-3"}),e[21]||(e[21]=l(" Temporal ",-1))]),_:1})):g("",!0)])]),t("td",_e,[t("div",ve,[t("div",ye,[r(s(N),{class:"mx-auto mb-1 h-4 w-4 text-blue-500"}),t("span",we,d(o.downloads_count),1),e[22]||(e[22]=t("p",{class:"text-xs"},"Descargas",-1))]),t("div",ke,[r(s(P),{class:"mx-auto mb-1 h-4 w-4 text-emerald-500"}),t("span",Ce,d(o.loans_count),1),e[23]||(e[23]=t("p",{class:"text-xs"},"Préstamos",-1))]),t("div",$e,[r(s(rt),{class:"mx-auto mb-1 h-4 w-4 text-purple-500"}),t("span",Ue,d(o.reservations_count),1),e[24]||(e[24]=t("p",{class:"text-xs"},"Reservas",-1))])])]),t("td",De,[r(s(ot),null,{default:a(()=>[r(s(at),{"as-child":""},{default:a(()=>[r(s(h),{variant:"ghost",size:"sm",class:"h-8 w-8 p-0 opacity-50 transition-opacity duration-200 group-hover:opacity-100"},{default:a(()=>[r(s(_t),{class:"h-4 w-4"})]),_:1})]),_:1}),r(s(it),{align:"end",class:"w-48"},{default:a(()=>[r(s(p),{"as-child":""},{default:a(()=>[r(s(f),{href:`/admin/users/${o.id}`,class:"flex cursor-pointer items-center text-foreground"},{default:a(()=>[r(s(vt),{class:"mr-2 h-4 w-4 text-blue-500"}),e[25]||(e[25]=l(" Ver detalles ",-1))]),_:1},8,["href"])]),_:2},1024),r(s(p),{"as-child":""},{default:a(()=>[r(s(f),{href:`/admin/users/${o.id}/edit`,class:"flex cursor-pointer items-center text-foreground"},{default:a(()=>[r(s(yt),{class:"mr-2 h-4 w-4 text-emerald-500"}),e[26]||(e[26]=l(" Editar usuario ",-1))]),_:1},8,["href"])]),_:2},1024),r(s(D)),r(s(p),{onClick:w=>R(o),class:"cursor-pointer"},{default:a(()=>[(n(),m(T(o.is_active?s(A):s($)),{class:"mr-2 h-4 w-4 text-orange-500"})),l(" "+d(o.is_active?"Desactivar":"Activar"),1)]),_:2},1032,["onClick"]),o.is_temp_password?(n(),m(s(p),{key:0,onClick:w=>z(o),class:"cursor-pointer"},{default:a(()=>[r(J,{class:"mr-2 h-4 w-4 text-amber-500"}),e[27]||(e[27]=l(" Ver Contraseña Temporal ",-1))]),_:1},8,["onClick"])):g("",!0),r(s(p),{onClick:w=>F(o),class:"cursor-pointer"},{default:a(()=>[r(s(wt),{class:"mr-2 h-4 w-4 text-purple-500"}),e[28]||(e[28]=l(" Resetear Contraseña ",-1))]),_:1},8,["onClick"]),r(s(D)),r(s(p),{"as-child":""},{default:a(()=>[r(s(f),{href:`/admin/users/${o.id}/download-history`,class:"flex cursor-pointer items-center text-foreground"},{default:a(()=>[r(s(N),{class:"mr-2 h-4 w-4 text-blue-500"}),e[29]||(e[29]=l(" Historial Descargas ",-1))]),_:1},8,["href"])]),_:2},1024),r(s(p),{"as-child":""},{default:a(()=>[r(s(f),{href:`/admin/users/${o.id}/loan-history`,class:"flex cursor-pointer items-center text-foreground"},{default:a(()=>[r(s(P),{class:"mr-2 h-4 w-4 text-emerald-500"}),e[30]||(e[30]=l(" Historial Préstamos ",-1))]),_:1},8,["href"])]),_:2},1024)]),_:2},1024)]),_:2},1024)])]))),128))])])]),u.users.data.length===0?(n(),x("div",Ee,[t("div",je,[t("div",Te,[r(s(v),{class:"h-10 w-10 text-primary"})]),e[35]||(e[35]=t("h3",{class:"mb-3 text-2xl font-bold text-foreground"}," No se encontraron usuarios ",-1)),t("p",Se,d(U.value>0?"Intenta ajustar tus filtros de búsqueda":"Comienza importando usuarios o creando uno manualmente"),1),t("div",Le,[r(s(h),{"as-child":"",variant:"outline",class:"border-primary/20 text-primary hover:bg-primary hover:text-primary-foreground"},{default:a(()=>[r(s(f),{href:"/admin/users/import",class:"flex items-center gap-2"},{default:a(()=>[r(s(kt),{class:"h-4 w-4"}),e[32]||(e[32]=l(" Importar Usuarios ",-1))]),_:1})]),_:1}),U.value===0?(n(),m(s(h),{key:0,"as-child":"",class:"inline-flex items-center gap-2 rounded-lg bg-primary px-6 py-3 text-primary-foreground transition-colors hover:bg-primary/90"},{default:a(()=>[r(s(f),{href:"/admin/users/create",class:"flex items-center gap-2"},{default:a(()=>[r(s(S),{class:"h-5 w-5"}),e[33]||(e[33]=l(" Crear Usuario ",-1))]),_:1})]),_:1})):(n(),m(s(h),{key:1,variant:"outline",onClick:q,class:"border-primary/20 text-primary hover:bg-primary hover:text-primary-foreground"},{default:a(()=>[r(s(lt),{class:"mr-2 h-4 w-4"}),e[34]||(e[34]=l(" Limpiar Filtros ",-1))]),_:1}))])])])):g("",!0)]),_:1})]),_:1}),u.users.data.length>0?(n(),x("div",Pe,[t("div",Ve,[(n(!0),x(C,null,E(u.users.links,(o,w)=>(n(),m(s(f),{key:w,href:o.url??"",disabled:!o.url,class:j(["rounded-lg px-3 py-1.5 text-sm font-medium",o.active?"bg-primary text-primary-foreground":"border border-input bg-background hover:bg-accent hover:text-accent-foreground",o.url?"":"cursor-not-allowed opacity-50"]),innerHTML:o.label,"preserve-scroll":""},null,8,["href","disabled","class","innerHTML"]))),128))])])):g("",!0)])]),_:1})],64)}}});export{js as default};
