import{d as C,C as V,f as b,w as a,g as l,i as s,j as i,u as r,t as g,l as h,y as q,n as T,c as z,o as p,F as A,q as D,s as E}from"./app-LMLfy6T_.js";import{_ as u}from"./InputError.vue_vue_type_script_setup_true_lang-MJXZgXbE.js";import{_ as x}from"./index-BP8NaMnx.js";import{c as _,_ as y,a as v,b as w}from"./CardTitle.vue_vue_type_script_setup_true_lang-G1xx1pv-.js";import{_ as k}from"./CardDescription.vue_vue_type_script_setup_true_lang-C7_bnbMg.js";import{_ as N}from"./CardFooter.vue_vue_type_script_setup_true_lang-Db_MMans.js";import{_ as U}from"./Checkbox.vue_vue_type_script_setup_true_lang-CWTQN3N_.js";import{_ as f}from"./Input.vue_vue_type_script_setup_true_lang-b_XRYuCz.js";import{_ as m}from"./Label.vue_vue_type_script_setup_true_lang-tC1vjbcF.js";import{_ as B,a as L,b as j,c as M,d as O}from"./SelectValue.vue_vue_type_script_setup_true_lang-D2fS4MRm.js";import{_ as P}from"./AppLayout.vue_vue_type_script_setup_true_lang-Dg9vcmqC.js";import{U as $}from"./user-ZOL3awYl.js";import{A as F}from"./arrow-left-DZ8dX4eD.js";import{L as G}from"./loader-circle-DOecIndr.js";import{S as H}from"./save-DXXiTHkW.js";import"./utils-DXrZ82kT.js";import"./VisuallyHidden-B-IbK-2_.js";import"./useForwardExpose-BGfwThGJ.js";import"./useFormControl-D4Xw429v.js";import"./Collection-CHrqpE2f.js";import"./RovingFocusGroup-BtwHaQnx.js";import"./VisuallyHiddenInput-C5xV_Z4D.js";import"./check-B7CcDjx-.js";import"./createLucideIcon-DAteRrvL.js";import"./house-JRBk0Cia.js";import"./chevron-up-BIDXjghQ.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./index-Cs2OOWYa.js";import"./log-out-B30-6VwK.js";import"./clock-DEh5UtGW.js";import"./_plugin-vue_export-helper-Cs5A_DpR.js";import"./users-DURgrSZU.js";import"./Breadcrumbs.vue_vue_type_script_setup_true_lang-bAsAvttd.js";import"./chevron-right-ti3lw4Bb.js";const J={class:"min-h-screen bg-background"},K={class:"sticky top-0 z-10 border-b border-border bg-card/50 backdrop-blur supports-[backdrop-filter]:bg-card/60"},Q={class:"p-6"},R={class:"flex items-center gap-4"},W={class:"flex-1"},X={class:"mt-1 flex items-center gap-2 text-muted-foreground"},Y={class:"mx-auto max-w-7xl p-6"},Z={class:"grid grid-cols-1 gap-6 lg:grid-cols-2 xl:grid-cols-3"},ee={class:"space-y-2"},se={class:"space-y-2"},re={class:"space-y-2"},ae={class:"space-y-2"},oe={class:"space-y-2"},te={class:"grid grid-cols-1 gap-6 lg:grid-cols-2 xl:grid-cols-3"},le={class:"space-y-2"},ie={class:"space-y-2"},de={class:"space-y-2"},ne={class:"space-y-2"},ue={class:"flex max-w-md flex-col gap-4"},me={class:"flex items-center space-x-3"},fe={class:"flex items-center space-x-3"},Qe=C({__name:"Edit",props:{user:{},userTypes:{},errors:{}},setup(d){const n=d,I=[{title:"Dashboard",href:"/admin/dashboard"},{title:"Usuarios",href:"/admin/users"},{title:`Editar ${n.user.name}`,href:"#"}],t=V({name:n.user.name,last_name:n.user.last_name,email:n.user.email,dni:n.user.dni,phone:n.user.phone,user_type:n.user.user_type,institutional_email:n.user.institutional_email||"",institutional_id:n.user.institutional_id||"",membership_expires_at:n.user.membership_expires_at?new Date(n.user.membership_expires_at).toISOString().split("T")[0]:"",max_concurrent_loans:n.user.max_concurrent_loans,can_download:n.user.can_download,is_active:n.user.is_active}),c=V({submitting:!1,fields:{}});function S(){c.submitting=!0,E.put(`/admin/users/${n.user.id}`,t,{preserveScroll:!0,onSuccess:()=>{c.submitting=!1},onError:()=>{c.submitting=!1}})}return(ce,e)=>(p(),b(P,{breadcrumbs:I},{default:a(()=>[l("div",J,[l("div",K,[l("div",Q,[l("div",R,[l("div",W,[e[12]||(e[12]=l("h1",{class:"text-3xl font-bold tracking-tight text-foreground"}," Editar Usuario ",-1)),l("p",X,[s(r($),{class:"h-4 w-4"}),i(" Actualiza la información de "+g(d.user.name)+" "+g(d.user.last_name),1)])]),s(r(x),{variant:"outline",size:"sm","as-child":""},{default:a(()=>[s(r(h),{href:"/admin/users"},{default:a(()=>[s(r(F),{class:"mr-2 h-4 w-4"}),e[13]||(e[13]=i(" Volver a Usuarios ",-1))]),_:1})]),_:1})])])]),l("div",Y,[l("form",{onSubmit:q(S,["prevent"]),class:"space-y-6"},[s(r(_),{class:"border-border bg-card shadow-lg"},{default:a(()=>[s(r(y),{class:"border-b border-border bg-muted/50"},{default:a(()=>[s(r(v),{class:"flex items-center gap-2 text-foreground"},{default:a(()=>[s(r($),{class:"h-5 w-5 text-primary"}),e[14]||(e[14]=i(" Información Personal ",-1))]),_:1}),s(r(k),{class:"text-muted-foreground"},{default:a(()=>[...e[15]||(e[15]=[i(" Información básica del usuario ",-1)])]),_:1})]),_:1}),s(r(w),{class:"space-y-4 pt-6"},{default:a(()=>[l("div",Z,[l("div",ee,[s(r(m),{for:"name",class:"text-foreground"},{default:a(()=>[...e[16]||(e[16]=[i("Nombre *",-1)])]),_:1}),s(r(f),{id:"name",modelValue:t.name,"onUpdate:modelValue":e[0]||(e[0]=o=>t.name=o),placeholder:"Ingresa el nombre",class:"w-full border-border bg-background focus:border-primary",required:""},null,8,["modelValue"]),s(u,{message:d.errors?.name},null,8,["message"])]),l("div",se,[s(r(m),{for:"last_name",class:"text-foreground"},{default:a(()=>[...e[17]||(e[17]=[i("Apellido *",-1)])]),_:1}),s(r(f),{id:"last_name",modelValue:t.last_name,"onUpdate:modelValue":e[1]||(e[1]=o=>t.last_name=o),placeholder:"Ingresa el apellido",class:"w-full border-border bg-background focus:border-primary",required:""},null,8,["modelValue"]),s(u,{message:d.errors?.last_name},null,8,["message"])]),s(r(f),{id:"email",modelValue:t.email,"onUpdate:modelValue":e[2]||(e[2]=o=>t.email=o),type:"email",placeholder:"usuario@ejemplo.com",class:T(["w-full border-border bg-background focus:border-primary",d.errors?.email?"border-destructive focus:border-destructive":""]),required:""},null,8,["modelValue","class"]),l("div",re,[s(r(m),{for:"dni",class:"text-foreground"},{default:a(()=>[...e[18]||(e[18]=[i("DNI *",-1)])]),_:1}),s(r(f),{id:"dni",modelValue:t.dni,"onUpdate:modelValue":e[3]||(e[3]=o=>t.dni=o),placeholder:"12345678",maxlength:"8",class:"w-full border-border bg-background focus:border-primary",required:""},null,8,["modelValue"]),s(u,{message:d.errors?.dni},null,8,["message"])]),l("div",ae,[s(r(m),{for:"phone",class:"text-foreground"},{default:a(()=>[...e[19]||(e[19]=[i("Teléfono *",-1)])]),_:1}),s(r(f),{id:"phone",modelValue:t.phone,"onUpdate:modelValue":e[4]||(e[4]=o=>t.phone=o),placeholder:"987654321",maxlength:"9",class:"w-full border-border bg-background focus:border-primary",required:""},null,8,["modelValue"]),s(u,{message:d.errors?.phone},null,8,["message"])]),l("div",oe,[s(r(m),{for:"user_type",class:"text-foreground"},{default:a(()=>[...e[20]||(e[20]=[i("Tipo de Usuario *",-1)])]),_:1}),s(r(B),{"model-value":t.user_type,"onUpdate:modelValue":e[5]||(e[5]=o=>t.user_type=o)},{default:a(()=>[s(r(L),{class:"w-full border-border bg-background focus:border-primary"},{default:a(()=>[s(r(j),{placeholder:"Selecciona el tipo"})]),_:1}),s(r(M),null,{default:a(()=>[(p(!0),z(A,null,D(d.userTypes,o=>(p(),b(r(O),{key:o.value,value:o.value},{default:a(()=>[i(g(o.label),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["model-value"]),s(u,{message:d.errors?.user_type},null,8,["message"])])])]),_:1})]),_:1}),s(r(_),{class:"border-border bg-card shadow-lg"},{default:a(()=>[s(r(y),{class:"border-b border-border bg-muted/50"},{default:a(()=>[s(r(v),{class:"text-foreground"},{default:a(()=>[...e[21]||(e[21]=[i("Información Institucional",-1)])]),_:1}),s(r(k),{class:"text-muted-foreground"},{default:a(()=>[...e[22]||(e[22]=[i(" Información adicional para usuarios institucionales ",-1)])]),_:1})]),_:1}),s(r(w),{class:"space-y-4 pt-6"},{default:a(()=>[l("div",te,[l("div",le,[s(r(m),{for:"institutional_email",class:"text-foreground"},{default:a(()=>[...e[23]||(e[23]=[i("Email Institucional",-1)])]),_:1}),s(r(f),{id:"institutional_email",modelValue:t.institutional_email,"onUpdate:modelValue":e[6]||(e[6]=o=>t.institutional_email=o),type:"email",placeholder:"usuario@institucion.edu.pe",class:"w-full border-border bg-background focus:border-primary"},null,8,["modelValue"]),s(u,{message:d.errors?.institutional_email},null,8,["message"])]),l("div",ie,[s(r(m),{for:"institutional_id",class:"text-foreground"},{default:a(()=>[...e[24]||(e[24]=[i("Código Institucional",-1)])]),_:1}),s(r(f),{id:"institutional_id",modelValue:t.institutional_id,"onUpdate:modelValue":e[7]||(e[7]=o=>t.institutional_id=o),placeholder:"Código o ID institucional",class:"w-full border-border bg-background focus:border-primary"},null,8,["modelValue"]),s(u,{message:d.errors?.institutional_id},null,8,["message"])]),l("div",de,[s(r(m),{for:"membership_expires_at",class:"text-foreground"},{default:a(()=>[...e[25]||(e[25]=[i("Membresía hasta",-1)])]),_:1}),s(r(f),{id:"membership_expires_at",modelValue:t.membership_expires_at,"onUpdate:modelValue":e[8]||(e[8]=o=>t.membership_expires_at=o),type:"date",min:new Date().toISOString().split("T")[0],class:"w-full border-border bg-background focus:border-primary"},null,8,["modelValue","min"]),s(u,{message:d.errors?.membership_expires_at},null,8,["message"])]),l("div",ne,[s(r(m),{for:"max_concurrent_loans",class:"text-foreground"},{default:a(()=>[...e[26]||(e[26]=[i("Máximo de Préstamos *",-1)])]),_:1}),s(r(f),{id:"max_concurrent_loans",modelValue:t.max_concurrent_loans,"onUpdate:modelValue":e[9]||(e[9]=o=>t.max_concurrent_loans=o),type:"number",min:"1",max:"10",class:"w-full border-border bg-background focus:border-primary",required:""},null,8,["modelValue"]),s(u,{message:d.errors?.max_concurrent_loans},null,8,["message"])])])]),_:1})]),_:1}),s(r(_),{class:"border-border bg-card shadow-lg"},{default:a(()=>[s(r(y),{class:"border-b border-border bg-muted/50"},{default:a(()=>[s(r(v),{class:"text-foreground"},{default:a(()=>[...e[27]||(e[27]=[i("Configuración",-1)])]),_:1}),s(r(k),{class:"text-muted-foreground"},{default:a(()=>[...e[28]||(e[28]=[i(" Opciones de acceso y permisos del usuario ",-1)])]),_:1})]),_:1}),s(r(w),{class:"space-y-4 pt-6"},{default:a(()=>[l("div",ue,[l("div",me,[s(r(U),{id:"can_download",checked:t.can_download,"onUpdate:checked":e[10]||(e[10]=o=>t.can_download=o),class:"data-[state=checked]:border-primary data-[state=checked]:bg-primary"},null,8,["checked"]),s(r(m),{for:"can_download",class:"cursor-pointer text-sm font-normal text-foreground"},{default:a(()=>[...e[29]||(e[29]=[i(" Permitir descarga de libros digitales ",-1)])]),_:1})]),l("div",fe,[s(r(U),{id:"is_active",checked:t.is_active,"onUpdate:checked":e[11]||(e[11]=o=>t.is_active=o),class:"data-[state=checked]:border-primary data-[state=checked]:bg-primary"},null,8,["checked"]),s(r(m),{for:"is_active",class:"cursor-pointer text-sm font-normal text-foreground"},{default:a(()=>[...e[30]||(e[30]=[i(" Usuario activo en el sistema ",-1)])]),_:1})])]),s(u,{message:d.errors?.can_download},null,8,["message"]),s(u,{message:d.errors?.is_active},null,8,["message"])]),_:1})]),_:1}),s(r(_),{class:"border-border bg-card shadow-lg"},{default:a(()=>[s(r(N),{class:"flex justify-between pt-6"},{default:a(()=>[s(r(x),{variant:"outline",type:"button","as-child":"",class:"border-border hover:bg-accent"},{default:a(()=>[s(r(h),{href:"/admin/users"},{default:a(()=>[...e[31]||(e[31]=[i(" Cancelar ",-1)])]),_:1})]),_:1}),s(r(x),{type:"submit",disabled:c.submitting,class:"bg-primary px-8 text-primary-foreground hover:bg-primary/90"},{default:a(()=>[c.submitting?(p(),b(r(G),{key:0,class:"mr-2 h-4 w-4 animate-spin"})):(p(),b(r(H),{key:1,class:"mr-2 h-4 w-4"})),i(" "+g(c.submitting?"Actualizando...":"Actualizar Usuario"),1)]),_:1},8,["disabled"])]),_:1})]),_:1})],32)])])]),_:1}))}});export{Qe as default};
