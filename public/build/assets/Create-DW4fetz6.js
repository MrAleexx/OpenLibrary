import{d as O,r as V,b as U,c as l,i as s,u as a,v as D,w as p,g as r,l as v,y as L,H as d,I as m,o as i,F as g,q as x,t as u,L as y,M as N,j as b,s as j}from"./app-LMLfy6T_.js";import{_ as q}from"./AppLayout.vue_vue_type_script_setup_true_lang-Dg9vcmqC.js";import{A as M}from"./arrow-left-DZ8dX4eD.js";import{C as E,a as A}from"./chevron-up-BIDXjghQ.js";import{S as B}from"./save-DXXiTHkW.js";import"./utils-DXrZ82kT.js";import"./useForwardExpose-BGfwThGJ.js";import"./VisuallyHidden-B-IbK-2_.js";import"./house-JRBk0Cia.js";import"./createLucideIcon-DAteRrvL.js";import"./Collection-CHrqpE2f.js";import"./index-BP8NaMnx.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./RovingFocusGroup-BtwHaQnx.js";import"./index-Cs2OOWYa.js";import"./log-out-B30-6VwK.js";import"./clock-DEh5UtGW.js";import"./_plugin-vue_export-helper-Cs5A_DpR.js";import"./users-DURgrSZU.js";import"./Breadcrumbs.vue_vue_type_script_setup_true_lang-bAsAvttd.js";import"./chevron-right-ti3lw4Bb.js";const P={class:"mx-auto max-w-4xl p-6"},F={class:"mb-8"},I={class:"mb-4 flex items-center gap-4"},T={class:"rounded-xl border border-border bg-card p-6 shadow-lg"},z={class:"grid grid-cols-1 gap-6 md:grid-cols-2"},H={class:"space-y-2"},$={class:"space-y-2"},G={class:"space-y-2"},J=["value"],K={class:"space-y-2"},Q={class:"flex items-center gap-2"},R=["disabled"],W=["value","selected"],X=["disabled"],Y={class:"space-y-2"},Z={class:"flex items-center gap-2"},ee={class:"flex items-center justify-end gap-4 border-t border-border pt-6"},re={type:"submit",class:"flex items-center gap-2 rounded-lg bg-primary px-6 py-2 text-primary-foreground shadow-lg shadow-primary/25 transition-colors hover:bg-primary/90"},oe={class:"mt-6 rounded-lg border border-blue-200 bg-blue-50 p-4"},te={class:"flex items-start gap-3"},se={class:"mt-1 text-sm text-blue-700"},Oe=O({__name:"Create",props:{parentCategories:{},nextSortOrder:{}},setup(f){const n=f,_=[{title:"Dashboard",href:"/admin/dashboard"},{title:"Categorías",href:"/admin/categories"},{title:"Crear Categoría",href:"/admin/categories/create"}],o=V({name:"",slug:"",description:"",parent_id:null,sort_order:n.nextSortOrder,is_active:!0,image:"",meta_title:"",meta_description:""}),C=U(()=>{const c=[];for(let e=1;e<=n.nextSortOrder;e++)c.push(e);return c}),w=()=>{j.post("/admin/categories",o.value)},k=()=>{o.value.slug||(o.value.slug=o.value.name.toLowerCase().replace(/[^\w ]+/g,"").replace(/ +/g,"-"))},h=()=>{o.value.sort_order<n.nextSortOrder&&o.value.sort_order++},S=()=>{o.value.sort_order>1&&o.value.sort_order--};return(c,e)=>(i(),l(g,null,[s(a(D),{title:"Crear Categoría"}),s(q,{breadcrumbs:_},{default:p(()=>[r("div",P,[r("div",F,[r("div",I,[s(a(v),{href:"/admin/categories",class:"rounded-lg p-2 text-muted-foreground transition-colors hover:bg-accent hover:text-foreground"},{default:p(()=>[s(a(M),{class:"h-5 w-5"})]),_:1}),e[6]||(e[6]=r("div",null,[r("h1",{class:"text-3xl font-bold text-foreground"}," Crear Nueva Categoría "),r("p",{class:"mt-2 text-muted-foreground"}," Agrega una nueva categoría o subcategoría a tu biblioteca ")],-1))])]),r("div",T,[r("form",{onSubmit:L(w,["prevent"]),class:"space-y-6"},[r("div",z,[r("div",H,[e[7]||(e[7]=r("label",{for:"name",class:"block text-sm font-medium text-foreground"}," Nombre de la Categoría * ",-1)),d(r("input",{id:"name","onUpdate:modelValue":e[0]||(e[0]=t=>o.value.name=t),type:"text",required:"",onInput:k,class:"w-full rounded-lg border border-border bg-background px-3 py-2 text-foreground focus:border-transparent focus:ring-2 focus:ring-primary focus:outline-none",placeholder:"Ej: Ciencias de la Computación"},null,544),[[m,o.value.name]])]),r("div",$,[e[8]||(e[8]=r("label",{for:"slug",class:"block text-sm font-medium text-foreground"}," Slug * ",-1)),d(r("input",{id:"slug","onUpdate:modelValue":e[1]||(e[1]=t=>o.value.slug=t),type:"text",required:"",class:"w-full rounded-lg border border-border bg-background px-3 py-2 font-mono text-foreground focus:border-transparent focus:ring-2 focus:ring-primary focus:outline-none",placeholder:"Ej: ciencias-computacion"},null,512),[[m,o.value.slug]])]),r("div",G,[e[10]||(e[10]=r("label",{for:"parent_id",class:"block text-sm font-medium text-foreground"}," Categoría Padre ",-1)),d(r("select",{id:"parent_id","onUpdate:modelValue":e[2]||(e[2]=t=>o.value.parent_id=t),class:"w-full rounded-lg border border-border bg-background px-3 py-2 text-foreground focus:border-transparent focus:ring-2 focus:ring-primary focus:outline-none"},[e[9]||(e[9]=r("option",{value:null}," Ninguna (Categoría Principal) ",-1)),(i(!0),l(g,null,x(f.parentCategories,t=>(i(),l("option",{key:t.id,value:t.id},u(t.name),9,J))),128))],512),[[y,o.value.parent_id]])]),r("div",K,[e[11]||(e[11]=r("label",{for:"sort_order",class:"block text-sm font-medium text-foreground"}," Orden de Visualización ",-1)),r("div",Q,[r("button",{type:"button",onClick:S,disabled:o.value.sort_order<=1,class:"rounded-lg border border-border p-2 transition-colors hover:bg-accent disabled:cursor-not-allowed disabled:opacity-50"},[s(a(E),{class:"h-4 w-4"})],8,R),d(r("select",{id:"sort_order","onUpdate:modelValue":e[3]||(e[3]=t=>o.value.sort_order=t),required:"",class:"flex-1 rounded-lg border border-border bg-background px-3 py-2 text-foreground focus:border-transparent focus:ring-2 focus:ring-primary focus:outline-none"},[(i(!0),l(g,null,x(C.value,t=>(i(),l("option",{key:t,value:t,selected:t===o.value.sort_order}," Posición "+u(t),9,W))),128))],512),[[y,o.value.sort_order,void 0,{number:!0}]]),r("button",{type:"button",onClick:h,disabled:o.value.sort_order>=n.nextSortOrder,class:"rounded-lg border border-border p-2 transition-colors hover:bg-accent disabled:cursor-not-allowed disabled:opacity-50"},[s(a(A),{class:"h-4 w-4"})],8,X)]),e[12]||(e[12]=r("p",{class:"text-xs text-muted-foreground"}," Las categorías se mostrarán en este orden en la navegación ",-1))])]),r("div",Y,[e[13]||(e[13]=r("label",{for:"description",class:"block text-sm font-medium text-foreground"}," Descripción ",-1)),d(r("textarea",{id:"description","onUpdate:modelValue":e[4]||(e[4]=t=>o.value.description=t),rows:"3",class:"w-full rounded-lg border border-border bg-background px-3 py-2 text-foreground focus:border-transparent focus:ring-2 focus:ring-primary focus:outline-none",placeholder:"Descripción opcional de la categoría..."},null,512),[[m,o.value.description]])]),r("div",Z,[d(r("input",{id:"is_active","onUpdate:modelValue":e[5]||(e[5]=t=>o.value.is_active=t),type:"checkbox",class:"h-4 w-4 rounded border-border text-primary focus:ring-2 focus:ring-primary"},null,512),[[N,o.value.is_active]]),e[14]||(e[14]=r("label",{for:"is_active",class:"text-sm font-medium text-foreground"}," Categoría activa ",-1))]),r("div",ee,[s(a(v),{href:"/admin/categories",class:"rounded-lg border border-border px-4 py-2 text-foreground transition-colors hover:bg-accent"},{default:p(()=>[...e[15]||(e[15]=[b(" Cancelar ",-1)])]),_:1}),r("button",re,[s(a(B),{class:"h-4 w-4"}),e[16]||(e[16]=b(" Crear Categoría ",-1))])])],32)]),r("div",oe,[r("div",te,[e[20]||(e[20]=r("div",{class:"mt-0.5 flex h-6 w-6 items-center justify-center rounded-full bg-blue-100"},[r("span",{class:"text-sm font-bold text-blue-600"},"i")],-1)),r("div",null,[e[18]||(e[18]=r("h3",{class:"font-semibold text-blue-900"}," Sobre el orden de categorías ",-1)),e[19]||(e[19]=r("p",{class:"mt-1 text-sm text-blue-700"}," El orden determina la posición en que aparecerán las categorías en la navegación. Las categorías se ordenan de menor a mayor número. ",-1)),r("p",se,[e[17]||(e[17]=r("strong",null,"Orden actual sugerido:",-1)),b(" "+u(o.value.sort_order)+" de "+u(n.nextSortOrder)+" posiciones disponibles ",1)])])])])])]),_:1})],64))}});export{Oe as default};
